<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link id="theme" rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha384-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" crossorigin="anonymous">
    <title>Admin Quiz Page</title>
</head>
<body>
    <div class="container">
        <header>
            <div class="home_logo">
                <a href="#">
                    <p class="logo1">QuizApp..</p>
                    <p class="logo2">Dashboard</p>
                </a>
            </div>
            <ul class="items">
                <li class="item">
                    <a href="/dashboard" class="item_link">Home</a>
                </li>
                <li class="item">
                    <a href="/activities" class="item_link">activities</a>
                </li>
                <li class="item">
                    <a href="logout" class="item_link">Logout</a>
                </li>
                <li class="item">
                    <button class="toggle-button" onclick="toggleTheme()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path d="M12 4c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zm0 14c-3.313 0-6-2.687-6-6s2.687-6 6-6 6 2.687 6 6-2.687 6-6 6zM6 12c0-3.313 2.687-6 6-6v12c-3.313 0-6-2.687-6-6z"/>
                        </svg>
                    </button>
                </li>
                
            </ul>
        </header>

        <section class="admin_section quiz">
            <div class="admin_section_right">
                <div class="admin_section_right_top">
                    <button class="create_quiz_btn">
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7 7V5"/>
                          </svg>                              
                        CREATE QUIZ
                      </button>       
                </div>
                <div class="admin_section_right_bottom">
                    <p class="admin_section_right_bottom_title">Quizzes</p>
                    <div class="admin_section_right_bottom_items">
                        <!-- Iterate over the quizzes -->
                        <div class="admin_section_right_bottom_item" th:each="quiz : ${quizzes}">
                            <div class="admin_section_right_bottom_item_left">
                                <!-- Display quiz title -->
                                <h5 th:text="${quiz.title}">Quiz Title</h5>
                                <!-- Display quiz description -->
                                <p th:text="${quiz.description}">Quiz Description</p>
                                <!-- Display quiz duration -->
                                <p th:text="'Duration: ' + ${quiz.durationInMinutes} + ' min'">Duration: XX min</p>
                            </div>
                            <div class="admin_section_right_bottom_item_right">
                                <!-- Add your action buttons here -->
                                <a th:href="@{/quiz/{id}/questions(id=${quiz.id})}">
                                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                                        <path fill-rule="evenodd" d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4.243a1 1 0 1 0-2 0V11H7.757a1 1 0 1 0 0 2H11v3.243a1 1 0 1 0 2 0V13h3.243a1 1 0 1 0 0-2H13V7.757Z" clip-rule="evenodd"/>
                                    </svg>                                          
                                </a>
                                <a th:href="@{/quiz/{id}/delete(id=${quiz.id})}" class="trash">
                                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                                        <path fill-rule="evenodd" d="M8.586 2.586A2 2 0 0 1 10 2h4a2 2 0 0 1 2 2v2h3a1 1 0 1 1 0 2v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V8a1 1 0 0 1 0-2h3V4a2 2 0 0 1 .586-1.414ZM10 6h4V4h-4v2Zm1 4a1 1 0 1 0-2 0v8a1 1 0 1 0 2 0v-8Zm4 0a1 1 0 1 0-2 0v8a1 1 0 1 0 2 0v-8Z" clip-rule="evenodd"/>
                                    </svg>    
                                </a>
                                <button class="edit">
                                    <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                                        <path fill-rule="evenodd" d="M14 4.182A4.136 4.136 0 0 1 16.9 3c1.087 0 2.13.425 2.899 1.182A4.01 4.01 0 0 1 21 7.037c0 1.068-.43 2.092-1.194 2.849L18.5 11.214l-5.8-5.71 1.287-1.31.012-.012Zm-2.717 2.763L6.186 12.13l2.175 2.141 5.063-5.218-2.141-2.108Zm-6.25 6.886-1.98 5.849a.992.992 0 0 0 .245 1.026 1.03 1.03 0 0 0 1.043.242L10.282 19l-5.25-5.168Zm6.954 4.01 5.096-5.186-2.218-2.183-5.063 5.218 2.185 2.15Z" clip-rule="evenodd"/>
                                    </svg>
                                </button>
                            </div>

                            <!-- --------------------- -->
                            <section class="form_popup_edit">
                                <form th:action="@{'/quiz/' + ${quiz.id} + '/edit'}" method="post">
                                    <h3>Edit Quiz</h3>
                                    <div class="form_control">
                                        <label for="title">Title</label>
                                        <input type="text" id="title" name="title" th:value="${quiz.title}" placeholder="Enter title">
                                    </div>
                                    <div class="form_control">
                                        <label for="description">Description</label>
                                        <textarea id="description" name="description" placeholder="Enter Quiz description" th:text="${quiz.description}"></textarea>
                                    </div>
                                    <div class="form_control">
                                        <label for="durationInMinutes">Duration In Minutes</label>
                                        <input type="number" id="durationInMinutes" name="durationInMinutes" th:value="${quiz.durationInMinutes}" placeholder="Enter duration in minutes">
                                    </div>
                                    <div class="form_buttons">
                                        <button type="submit" class="save">Update</button>
                                        <button type="button" class="close">Close</button>
                                    </div>
                                </form>                                     
                            </section>
                            <!-- --------------------- -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <section class="form_popup">
        <form action="/dashboard" method="post">
            <h3>ADD Quiz</h3>
            <div class="form_control">
                <label for="title">Title</label>
                <input type="text" id="title" name="title" placeholder="Enter title">
            </div>
            <div class="form_control">
                <label for="description">Description</label>
                <textarea id="description" name="description" placeholder="Enter Quiz description"></textarea>
            </div>
            <div class="form_control">
                <label for="durationInMinutes">Duration In Minutes</label>
                <input type="number" id="durationInMinutes" name="durationInMinutes" placeholder="Enter duration in minutes">
            </div>
            <div class="form_buttons">
                <button type="submit" class="save">Save</button>
                <button type="button" class="close">Close</button>
            </div>
        </form>        
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
        const createQuizBtn = document.querySelector('.create_quiz_btn');
        const formPopup = document.querySelector('.form_popup');
        const closeBtn = document.querySelector('.form_buttons .close');

        // Function to add active class to form_popup
        function openFormPopup() {
            formPopup.classList.add('active');
        }

        // Function to remove active class from form_popup
        function closeFormPopup() {
            formPopup.classList.remove('active');
        }

        // Event listener for create_quiz_btn
        createQuizBtn.addEventListener('click', function(event) {
            event.preventDefault(); // Prevent default behavior of button
            openFormPopup(); // Call function to open form popup
        });

        // Event listener for close button
        closeBtn.addEventListener('click', function(event) {
            event.preventDefault(); // Prevent default behavior of button
            closeFormPopup(); // Call function to close form popup
        });

        const editButtons = document.querySelectorAll('.admin_section_right_bottom_item_right .edit');

        // Function to add active class to form_popup_edit
        function openFormPopupEdit(editButton) {
            const parentItem = editButton.closest('.admin_section_right_bottom_item');
            const formPopupEdit = parentItem.querySelector('.form_popup_edit');
            formPopupEdit.classList.add('active');
        }

        // Function to remove active class from form_popup_edit
        function closeFormPopupEdit(editButton) {
            const parentItem = editButton.closest('.admin_section_right_bottom_item');
            const formPopupEdit = parentItem.querySelector('.form_popup_edit');
            formPopupEdit.classList.remove('active');
        }

        // Event listeners for edit buttons
        editButtons.forEach(function(editButton) {
            editButton.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default behavior of button
                openFormPopupEdit(editButton); // Call function to open form popup edit
            });
        });

        // Event delegation for close button in form_popup_edit
        document.addEventListener('click', function(event) {
            const target = event.target;
            if (target.classList.contains('form_popup_edit') || target.classList.contains('close')) {
                closeFormPopupEdit(target); // Call function to close form popup edit
            }
        });
    });

    </script>
</body>
</html>
